angular.module("SAE",["ngRoute","sae.controller.inicio","sae.directive.header","sae.directive.menu","sae.controller.tipocliente","sae.directive.acciones","ngTable","sae.directive.botonesacciones","sae.services.http","sae.directive.listageneral","ngMaterial","sae.directive.form"]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"templates/controllers/inicio.html",controller:"InicioController"}).when("/tipocliente/index",{templateUrl:"templates/controllers/indextipocliente.html",controller:"TipoClienteController"}).when("/cliente/index",{templateUrl:"templates/controllers/indexcliente.html",controller:"TipoClienteController"}).otherwise({redirectTo:"/"})}]);
angular.module("sae.controller",[]).controller("MenuController",["$scope","saeHttp",function(o,n){n({method:"get",url:"/api/configuracion/menu"}).then(function(n){o.modulos=n})["catch"](function(o){console.log(o)})}]);
angular.module("sae.controller.inicio",["sae.controller"]).controller("InicioController",["$scope","$controller",function(o,l){angular.extend(this,l("MenuController",{$scope:o}))}]);
angular.module("sae.controller.tipocliente",["sae.directive.modal"]).controller("TipoClienteController",["$scope","$routeParams","saeHttp","Lista",function(e,o,i,t){i({method:"get",url:"/api/tipocliente/lista"}).then(function(o){var i={};i.data=o,i.columns=[{field:"nombre",title:"Nombre",filter:{nombre:"text"},sortable:"nombre",show:!0},{field:"descripcion",title:"Descripción",filter:{descripcion:"text"},sortable:"descripcion",show:!0},{field:"action",title:"",dataType:"command",acciones:{editar:{show:!0,connect:"editarTipoCliente"},eliminar:{show:!0,connect:"eliminarTipoCliente"}}}],e.data=i})["catch"](function(e){console.log(e)}),e.modalFormCrear={idControl:"btn-form-crear",type:"large",title:"Crear tipo cliente",idShow:"form-crear"},e.modalFormEditar={idControl:"btn-form-editar",type:"large",title:"Editar tipo cliente",idShow:"form-editar"},e.formCrear={action:"/api/tipocliente/crear",listenEvent:"crearTipoCliente",camps:[{type:"text",label:"Nombre",name:"nombre",validate:!0,message:"Nombre"},{type:"textarea",label:"Descripción",name:"descripcion"}]},e.$on(e.formCrear.listenEvent,function(e,o){var i=o.response;t.AddRow(i),$("#close").click()}),e.$on("editarTipoCliente",function(e,o){console.log("EDITAR"),console.log(o),$("#btn-form-editar").click()}),e.$on("eliminarTipoCliente",function(o,n){var r=n;$("#eliminar").click();var l="<p>Esta seguro de eliminar el tipo cliente <strong>"+r.nombre+"</strong>, si lo eliminas se perderan todos los datos asociados al tipo cliente.</p>";$("#msgDelete").html(l),e.eliminar=function(){i({method:"post",url:"/api/tipocliente/eliminar/"+r.id}).then(function(e){t.DeleteRow(r)})["catch"](function(e){e.fn()})}}),e.openModalCrear=function(){var o=e.modalFormCrear.idControl;$("#"+o).click()}}]);
angular.module("sae.directive.acciones",[]).directive("saeAcciones",function(){return{scope:{data:"@"},restrict:"E",templateUrl:"../../templates/directives/acciones.html",replace:!0,link:function(e){e.values=JSON.parse(e.data||"[]")}}});
angular.module("sae.directive.botonesacciones",[]).directive("saeBotones",["saeHttp",function(e){return{scope:{data:"@"},restrict:"E",templateUrl:"../../templates/directives/botonesacciones.html",replace:!0,link:function(t){t.guardar=function(){var a={};$(".sae-form").find(":input").each(function(e){a[this.name]=this.value}),e({method:"post",url:$(".sae-form")[0].action,data:a}).then(function(e){t.$emit("guardar",e)})["catch"](function(e){t.$emit("guardar",e)})},t.cancelar=function(){console.log("Pendiente por desarrollar ...")}}}}]);
angular.module("sae.directive.form",[]).directive("saeForm",["saeHttp",function(e){return{scope:{data:"@"},restrict:"E",templateUrl:"../../templates/directives/form.html",link:function(t){t.config=JSON.parse(t.data||"[]"),t.config.method=t.config.method||"POST",t.config.fn=function(){alert("XXXXX")},t.enviarForm=function(){var i={},n=!1;return $(".input").each(function(e){var t=Boolean($(this).attr("validate"));t===!0&&0===this.value.length?($(this).addClass("sae-red"),n=!0):($(this).removeClass("sae-red"),i[this.name]=this.value)}),n===!0?!1:void e({method:"post",url:$(".sae-form")[0].action,data:i}).then(function(e){var i={success:!0,fail:!1,response:e};$(".input").each(function(e){this.value=""}),t.$emit(t.config.listenEvent,i)})["catch"](function(e){var i={success:!1,fail:!0,response:e};$(".input").each(function(e){this.value=""}),t.$emit(t.config.listenEvent,i)})}}}}]);
angular.module("sae.directive.header",[]).directive("saeHeader",function(){return{restrict:"E",templateUrl:"../../templates/directives/header.html",replace:!0,link:function(e){}}});
angular.module("sae.directive.listageneral",[]).factory("Lista",["NgTableParams",function(a){var e={};return e.oNgTableParams={},e.Inicializador=function(t){e.oNgTableParams=new a({page:1,count:10},{data:t})},e.AddRow=function(a){e.oNgTableParams.settings().data.unshift(a),e.oNgTableParams.sorting({}),e.oNgTableParams.page(1),e.oNgTableParams.reload()},e.DeleteRow=function(a){for(var t=e.oNgTableParams.settings().data,i=0;i<t.length;i++)t[i].id===a.id&&e.oNgTableParams.settings().data.splice(i,1);e.oNgTableParams.reload().then(function(a){0===a.length&&e.oNgTableParams.total()>0&&(e.oNgTableParams.page(e.oNgTableParams.page()-1),e.oNgTableParams.reload())})},e}]).directive("saeListageneral",["Lista",function(a){return{scope:{data:"@"},restrict:"E",templateUrl:"../../templates/directives/listageneral.html",link:function(e){function t(){var t=e.values.data||[];e.cols=e.values.columns||[],a.Inicializador(t),e.tableParams=a.oNgTableParams}e.$watch("data",function(a){e.values=JSON.parse(a||"[]"),t()}),e.editar=function(a,t){e.$emit(a,t)},e.eliminar=function(a,t){e.$emit(a,t)},e.ver=function(a,t){e.$emit(a,t)}}}}]);
angular.module("sae.directive.menu",[]).directive("saeMenu",function(){return{scope:{data:"@"},restrict:"E",templateUrl:"../../templates/directives/menu.html",replace:!0,link:function(e){e.values=JSON.parse(e.data||"[]"),e.$watch("data",function(t){e.values=JSON.parse(t||"[]"),angular.element(document).ready(function(){$("#side-menu").metisMenu()})})}}});
angular.module("sae.directive.modal",[]).directive("saeModal",function(){return{scope:{config:"@"},restrict:"E",templateUrl:"../../templates/directives/modal.html",link:function(l){l.$watch("config",function(e){var t=JSON.parse(e||"{}");t.idModal="modal_"+t.idShow,t.content="content_"+t.idShow,t.clazz="",t.logitud="","large"===t.type?(t.clazz="bs-example-modal-lg",t.logitud="modal-lg"):"small"===t.type&&(t.clazz="bs-example-modal-sm",t.logitud="modal-sm"),angular.element(document).ready(function(){var l=$("#"+t.idShow).html();$("#"+t.content).html(l)}),l.modal=t})}}});
angular.module("sae.services.http",[]).constant("CONST",{msgError:'<div class="alert alert-warning alert-dismissible" role="alert">\n				<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n				<strong>Warning!</strong> #MGS#\n			  </div>'}).service("saeHttp",["$http","$q","CONST",function(r,t,e){return function(n){var a=t.defer();return r(n).then(function(r){a.resolve(r.data)},function(r){var t=r.data;a.reject({fn:function(){var r=e.msgError.replace("#MGS#",t.sError);$("#contenedorError").html(r)},oError:t})}),a.promise}}]);